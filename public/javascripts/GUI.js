/********************************************* FORM **********************************************
 * Name: Harris Zheng
 * Title: GUI.js
 * Date: February 23rd, 2020
 * Description: All static elements generated by JavaScript. 
*/

/** 
 * Name: createFormHTML
 * Description: Creates the Form HTML.
*/
function createFormHTML(){
    html = 
    `<div class="form-background">
      <form id="searchForm" onsubmit="findCourse();return false">
          <label for="Course:">Course:</label>
          <input type="text" id="course" autocomplete="on" list="suggestions" class="form-control">
          <datalist id="suggestions">
          </datalist>
          <button type="button" class="btn btn-success" onclick="findCourse()">Confirm</button>
      </form>
    </div>`;
    doc = new DOMParser().parseFromString(html, "text/html");
  }
  
  /**
   * Name: showForm
   * Description: Initialize form elements and show them. 
   */
  function showForm(){
    createFormHTML();
    let limiter = document.querySelector('.limiter');
    let child = doc.getElementsByClassName('form-background')[0]; 
    document.body.insertBefore(child, limiter);
    document.querySelector('#course').addEventListener('input', filterSearch);
  } // showForm

 
/** 
 * Name: closeForm
 * Description:  Removes DOM element of the form. 
*/
function closeForm(){
  background = document.querySelector('.form-background');
  document.body.removeChild(background);

}

/**************************************** Web Drawing Refreshes *****************************************************/
/**
 * Name: updateUploadUI
 * Description: Redraw the webpage after JSON file has been uploaded.
 */
function updateUploadUI(){
  displayedCourses.pop(); // remove the initial values tab
  for (course of displayedCourses){
    html = `<table><tr class="row100 body" id = ` + (id) + `>
    <td class="cell100 column1">` + course.Code + `</td>
    <td class="cell100 column2">` + course.Title + `</td>
    <td class="cell100 column3">` + course.Math + `</td>
    <td class="cell100 column4">` + course.NS + `</td>
    <td class="cell100 column5">` + course.CS + `</td>
    <td class="cell100 column6">` + course.ES + `</td>
    <td class="cell100 column7">` + course.ED + `</td>
    <td class="cell100 column8"><button type="button" class="btn btn-danger" onclick="removeCourse(` + (id++) + `)">Remove</button></td>
    </tr><table>`;

    doc = new DOMParser().parseFromString(html, "text/html");
    child = doc.querySelector('table > tbody > tr');
    console.log(child);
    console.log(doc.html); 
    parent = document.querySelector('tbody');
    sibling = document.querySelector('#initial'); 
    parent.insertBefore(child, sibling);

  }
}

  